@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #f8fafc;
  --foreground: #0f172a;
  --primary: #10b981;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
}

@layer components {
  .ui-card {
    @apply rounded-3xl border border-slate-200 bg-white p-6 shadow-sm;
  }
  
  .ui-button-primary {
    @apply inline-flex items-center justify-center rounded-full bg-[var(--primary)] px-4 py-2 text-sm font-semibold text-white shadow transition hover:opacity-90 active:scale-95 disabled:opacity-50;
  }
  
  .ui-input {
    @apply h-11 w-full rounded-full border border-slate-200 bg-white px-4 text-sm text-slate-700 outline-none transition focus:border-[var(--primary)] focus:ring focus:ring-opacity-20;
    --tw-ring-color: var(--primary);
  }

  .ui-input-tight {
    @apply h-12 w-full rounded-2xl border border-slate-100 bg-slate-50/50 px-5 text-sm font-medium text-slate-900 outline-none transition-all placeholder:text-slate-400 focus:border-[var(--primary)] focus:bg-white focus:ring-4 focus:ring-opacity-5 shadow-sm;
    --tw-ring-color: var(--primary);
  }
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 5px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: #e2e8f0;
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: #cbd5e1;
}

/* FullCalendar Custom Styles */
.fc {
  --fc-button-bg-color: #f8fafc;
  --fc-button-border-color: #e2e8f0;
  --fc-button-hover-bg-color: #f1f5f9;
  --fc-button-hover-border-color: #cbd5e1;
  --fc-button-active-bg-color: var(--primary);
  --fc-button-active-border-color: var(--primary);
  --fc-button-text-color: #475569;
  --fc-today-bg-color: #f0fdfa;
  --fc-border-color: #f1f5f9;
  /* Much lighter non-business shading */
  --fc-non-business-color: #f8fafc;
  font-family: inherit;
}

.fc .fc-non-business {
  background-color: #f8fafc !important;
  opacity: 1 !important;
}

.fc .fc-timegrid-col {
  /* Allow the today background to show if present */
  background-color: transparent;
}

.fc .fc-day-today {
  background-color: #f0fdf4 !important; /* Very light emerald/green */
}

.fc .fc-timegrid-slots, 
.fc .fc-timegrid-cols,
.fc .fc-timegrid-body {
  background-color: transparent !important;
}

.fc .fc-timegrid-slot {
  background-color: transparent !important;
}

.fc .fc-timegrid-slot-lane {
  /* Allow our alternating hour shading to show through */
  background-color: transparent;
}

/* Alternating hour banding (every other hour) for readability.
   Assumes default 30min slots => 2 rows per hour => shade every other *pair* of rows. */
.fc .fc-timegrid-slots tr:nth-child(4n + 3) td.fc-timegrid-slot-lane,
.fc .fc-timegrid-slots tr:nth-child(4n + 4) td.fc-timegrid-slot-lane {
  background-color: rgba(148, 163, 184, 0.12) !important; /* very light slate */
}

/* Also tint the time-axis cells so the band spans the full width */
.fc .fc-timegrid-slots tr:nth-child(4n + 3) td.fc-timegrid-slot-label,
.fc .fc-timegrid-slots tr:nth-child(4n + 4) td.fc-timegrid-slot-label,
.fc .fc-timegrid-slots tr:nth-child(4n + 3) td.fc-timegrid-axis,
.fc .fc-timegrid-slots tr:nth-child(4n + 4) td.fc-timegrid-axis {
  background-color: rgba(148, 163, 184, 0.12) !important;
}

/* Stronger gridlines across the entire calendar (easier to read) */
.fc-theme-standard td,
.fc-theme-standard th {
  border-color: #d1d5db !important; /* slate/gray-300 */
}

.fc .fc-scrollgrid,
.fc .fc-scrollgrid-section,
.fc .fc-scrollgrid-section-body,
.fc .fc-scrollgrid-section-header {
  border-color: #d1d5db !important;
}

.fc .fc-timegrid-slot,
.fc .fc-timegrid-slot-lane,
.fc .fc-timegrid-axis,
.fc .fc-timegrid-col {
  border-color: #d1d5db !important;
}

/* Background events (available holes) */
.fc .fc-bg-event {
  opacity: 1 !important;
  background-color: #ffffff !important;
  /* Keep availability "holes" below gridlines for readability */
  z-index: 0 !important;
}

/* Let hour banding show through the "available" background holes */
.fc .fc-bg-event.available-hole {
  background-color: rgba(255, 255, 255, 0.55) !important;
}

/* Background events (available holes) */
.fc .fc-bg-event {
  opacity: 1 !important;
  background-color: #ffffff !important;
}

.fc .fc-toolbar-title {
  @apply text-base md:text-lg font-black text-slate-900 tracking-tighter uppercase italic py-2 !important;
}

.fc .fc-toolbar {
  @apply flex-col md:flex-row gap-6 mb-8 px-4 !important;
}

.fc .fc-toolbar-chunk {
  @apply flex items-center justify-center md:justify-start gap-1 md:gap-2 w-full md:w-auto !important;
}

/* Fix for toolbar buttons overlapping on very small screens */
@media (max-width: 480px) {
  .fc .fc-toolbar-chunk { @apply gap-1 !important; }
  .fc .fc-button { @apply px-2 py-1.5 text-[8px] !important; }
}

/* Mobile: tighten time grid + event harness spacing (calendar-view-v2 handles card internals) */
@media (max-width: 640px) {
  .fc .fc-timegrid-event-harness { @apply p-0.5 !important; }
  .fc .fc-timegrid-slot { @apply h-[34px] !important; }
}

.fc .fc-button {
  @apply rounded-xl md:rounded-full px-3 md:px-5 py-2 md:py-2.5 text-[9px] md:text-[10px] font-black uppercase tracking-widest transition-all shadow-none border-slate-200 bg-white text-slate-600 hover:bg-slate-50 hover:text-slate-900 active:scale-95 focus:ring-0 !important;
}

.fc .fc-button-primary:not(:disabled):active, 
.fc .fc-button-primary:not(:disabled).fc-button-active {
  @apply bg-primary text-white border-primary shadow-lg !important;
}

.fc .fc-button .fc-icon {
  @apply text-xs md:text-sm !important;
}

.fc .fc-col-header-cell {
  @apply py-4 bg-slate-50/50 text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400 border-none !important;
}

.fc .fc-daygrid-day-number {
  @apply p-3 text-[11px] font-bold text-slate-400 !important;
}

.fc .fc-timegrid-slot {
  @apply h-[39px] border-slate-100 !important;
}

.fc .fc-timegrid-slot-label {
  @apply text-[11px] font-black uppercase tracking-widest text-slate-500 !important;
}

.fc .fc-timegrid-axis-cushion, .fc .fc-timegrid-slot-label-cushion {
  @apply py-2.5 !important;
}

/* Wider left time axis + bolder time text */
.fc .fc-timegrid-axis {
  width: 84px !important;
}

.fc .fc-timegrid-axis-cushion,
.fc .fc-timegrid-slot-label-cushion {
  @apply text-[12px] font-black !important;
}

.fc .fc-timegrid-col {
  @apply border-slate-100 !important;
}

.fc .fc-v-event {
  @apply bg-transparent border-none shadow-none overflow-visible !important;
}

.fc .fc-timegrid-event-harness {
  @apply p-1 overflow-visible !important;
}

.fc .fc-event-main {
  @apply p-0 overflow-visible !important;
}

.booking-event-card {
  @apply transition-all duration-200 !important;
}

.booking-event-card:hover {
  @apply z-50 !important;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  @apply bg-slate-200 rounded-full hover:bg-slate-300;
}

/* Sunrise/Sunset Calendar Lines */
.sunrise-line {
  border-top: 2px dashed rgba(251, 191, 36, 0.4) !important;
  pointer-events: none !important;
  z-index: 5 !important;
  height: 0 !important;
  overflow: visible !important;
}

.sunrise-line::after {
  content: "‚òÄÔ∏è Sunrise";
  position: absolute;
  left: 4px;
  top: -14px;
  font-size: 8px;
  font-weight: 900;
  text-transform: uppercase;
  color: #fbbf24;
  letter-spacing: 0.05em;
  white-space: nowrap;
}

.sunset-line {
  border-top: 2px dashed rgba(124, 58, 237, 0.4) !important;
  pointer-events: none !important;
  z-index: 5 !important;
  height: 0 !important;
  overflow: visible !important;
}

.sunset-line::after {
  content: "üåô Sunset";
  position: absolute;
  left: 4px;
  top: -14px;
  font-size: 8px;
  font-weight: 900;
  text-transform: uppercase;
  color: #7c3aed;
  letter-spacing: 0.05em;
  white-space: nowrap;
}

/* Safari border-radius clipping fix (masonry/columns + transformed children)
   Note: previous gate used -webkit-touch-callout (often iOS-only), so it didn't apply to desktop Safari. */
@supports (-webkit-mask-image: -webkit-radial-gradient(white, black)) {
  .safari-rounded-fix {
    -webkit-mask-image: -webkit-radial-gradient(white, black);
    mask-image: radial-gradient(white, black);
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 100% 100%;
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform;
  }
}
